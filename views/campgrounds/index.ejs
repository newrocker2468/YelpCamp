<% layout('layouts/boilerplate') %>
<div id="map" style="width: 100%;height: 500px;"></div>
    <h1>All Campgrounds</h1>
    <div>
        <a href="/campgrounds/new">Add Campground</a>
    </div>
<p style="color: black;">Random Quote : <%= r[0].quote%></p>
        <%for (let campground of campgrounds) { %>
            <!-- <li><a href="campgrounds/<%= campground._id%>">
                    <%= campground.tittle%>
                </a></li> -->
                <div class="card mb-3">
                    <div class="row">
                        <div class="col-md-4">
                        
<% if(campground.images.length > 0){ %>
    <img crossorigin="anonymous" src="<%=campground.images[1].url%>" class="img-fluid" alt="Responsive image">
<% } else{ %>
    <img crossorigin="anonymous" src="https://imgs.search.brave.com/NmIhDCnRfV7tkvlHoLvpYOEzfhJpA0oCKBWF6v_m0js/rs:fit:500:0:0/g:ce/aHR0cHM6Ly90My5m/dGNkbi5uZXQvanBn/LzAyLzY4LzU1LzYw/LzM2MF9GXzI2ODU1/NjAxMl9jMVdCYUtG/TjVyalJ4UjJleVYz/M3puSzRxblllS1pq/bS5qcGc" crossorigin="anonymous" class="img-fluid" alt="Responsive image">
<% } %>
                          
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <div class="card-title">
                                   <h5 class="card-title"><%= campground.tittle%></h5>
                                    <p class="card-text"><%= campground.description%></p>
                                    <p class="card-text">
                                        <small class="text-muted"><%= campground.location%></small>
                                    </p>
                                    <a class="btn btn-primary" href="/campgrounds/<%= campground.id%>" >View <%= campground.tittle%></a>
                                </div>
                            </div>
                        </div>
                    </div>
               
                </div>

            <% } %>
    


<script>
    const mapToken = "<%= process.env.MAPBOX_TOKEN%>";
    const campgrounds = {features: JSON.parse('<%- JSON.stringify(campgrounds).replace(/'/g, "\\'") %>')};
</script>
<script src="/javascripts/clusterMap.js"></script>